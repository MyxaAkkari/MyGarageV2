<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>My Garage</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='styles/style.css') }}">
</head>

<body>


<div id="main-content">
    <h1>My Garage</h1>
    <form action="/add" method="post">
        Owner's Name: <input name="ownerName">
        Phone Number: <input type="tel" name="phoneNumber">
        Brand: <input name="brand">
        Model: <input name="model">
        Model Year: <input name="year">
        Color: <input name="clr">
        <button style="display: flex;" type="submit">Add</button>
    </form>

    <h2>Cars list</h2>
    <div id="counter">Total Cars: {{ cars|length }}</div><br>
    <a href="{{ url_for('fixed') }}"><button>Fixed Cars</button></a>
    <div id="display">
        <table border="1">
            <thead>
                <tr>
                    <th>ID</th>
                    <th>Owner's Name</th>
                    <th>Phone Number</th>
                    <th>Brand</th>
                    <th>Model</th>
                    <th>Model Year</th>
                    <th>Color</th> 
                    <th>Fixed</th>
                    <th>Edit</th>
                </tr>
            </thead>
            <tbody>
                {% for car in cars %}
                <tr>
                    <td>{{ car[0] }}</td>
                    <td>{{ car[1] }}</td>
                    <td>{{ car[2] }}</td>
                    <td>{{ car[3] }}</td>
                    <td>{{ car[4] }}</td>
                    <td>{{ car[5] }}</td>
                    <td>{{ car[6] }}</td>
                    <td>
                        <form method="POST" action="/delete/{{ car[0] }}" onsubmit="return confirm('Are you sure you want to delete this car?');">
                            <input type="submit" value="Delete">
                        </form>
                    </td>
                    <td>
                        <input onclick="toggleEditForm({{ car[0] }})" type="button" value="Edit">
                        <form id="editForm{{ car[0] }}" style="display:none;" method="post" action="/edit/{{ car[0] }}">
                            <!-- Your input fields for editing here -->
                            <label for="ownerName">Owner's Name:</label>
                            <input type="text" name="ownerName" value="{{ car[1] }}" required><br>
                    
                            <label for="phoneNumber">Phone Number:</label>
                            <input type="tel" name="phoneNumber" value="{{ car[2] }}" required><br>
                    
                            <label for="brand">Brand:</label>
                            <input type="text" name="brand" value="{{ car[3] }}" required><br>
                    
                            <label for="model">Model:</label>
                            <input type="text" name="model" value="{{ car[4] }}" required><br>
                    
                            <label for="year">Model Year:</label>
                            <input type="text" name="year" value="{{ car[5] }}" required><br>
                    
                            <label for="clr">Color:</label>
                            <input type="text" name="clr" value="{{ car[6] }}" required><br>
                    
                            <button type="submit">Save Changes</button>
                        </form>
                    </td>
                    
                </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>


</div>
<script>
     function toggleEditForm(carId) {
        var editForm = document.getElementById('editForm' + carId);
        editForm.style.display = (editForm.style.display === 'none' || editForm.style.display === '') ? 'block' : 'none';
    }
</script>
</body>

</html>